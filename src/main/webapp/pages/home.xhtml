<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/WEB-INF/view/templates/glue.xhtml">
        <ui:param name="title" value="#{messages['common.home']}" />

        <ui:define name="subnav">
        </ui:define>

        <ui:define name="topnav-post-template">
            <li>
                <h:link outcome="/pages/profile/profile"
                        value="#{profile.username}"
                        rendered="false">
                    <f:param name="profileId" value="#{profile.id}" />
                </h:link>
            </li>
            <ui:insert name="topnav-post-profile"/>
        </ui:define>

        <ui:define name="header-replace">
            <div style="width: 100%; background-color: #FFF5E3; margin-bottom: 10px; ">
                <div class="container">
                    <div class="row-fluid" style="margin-top: 5px;">
                        <div class="span4">
                            <h:link outcome="/pages/profile/view" title="${userProfile.fullName}">
                                <ocp:gravatar email="${userProfile.email}" size="32" updatable="true" />
                                <f:param name="profileId" value="#{userProfile.id}"/>
                            </h:link>
                            <div class="btn-group">
                                <h:link outcome="/pages/profile/view" title="${userProfile.fullName}" styleClass="btn">
                                    ${userProfile.fullName}
                                    <f:param name="profileId" value="#{userProfile.id}"/>
                                </h:link>
                                <button class="btn dropdown-toggle" data-toggle="dropdown">
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <!-- dropdown menu links -->
                                    <li>
                                        <h:link outcome="/pages/profile/profile" title="#{messages['common.viewprofile']}" value="#{messages['common.viewprofile']}">
                                            <f:param name="profileId" value="#{userProfile.id}"/>
                                        </h:link>
                                        <li>
                                            <h:link outcome="/pages/management/organization/list" title="#{messages['module.management.organizations']}" value="${messages['module.management.organizations']}">
                                            </h:link>
                                        </li>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="span4 offset4">
                            <h4 class="fr">#{messages['common.none']}</h4>
                        </div>
                    </div>

                </div>
            </div>
        </ui:define>

        <ui:define name="content">
            <div class="row">
                <div class="span4">
                    <div class="marketing">
                        <h2>#{messages['common.welcome']}</h2>
                        <b></b>
                    </div>
                </div>
                <div class="span8">
                    <div class="well bs-docs-sidebar" style="padding-top: 7px; padding-bottom: 10px;">
                        <h:link value="#{messages['module.management.organization.create']}" outcome="/pages/management/organization/organization.xhtml" class="btn fr" rendered="true">
                            <f:param name="organizationId"></f:param>
                            <f:param name="outcome" value="/pages/home"></f:param>
                        </h:link>        
                        <h3>#{messages['module.management.organizations']} (#{organizations.count})</h3>
                        <ul class="nav nav-tabs nav-stacked">
                            <ui:repeat var="_organization" value="#{organizations.all}" varStatus="i">
                                <li>
                                    <div class="box" style="margin-bottom: 8px;">
                                        <div class="row">
                                            <div class="span6 columns">
                                                <h4>#{_organization.name}</h4>
                                                <div class="btn-toolbar">
                                                    <div class="btn-group">
                                                        <h:link outcome="/pages/management/owner/list.xhtml"
                                                                title="#{messages['module.management']}"
                                                                styleClass="icon-home">
                                                            <f:param name="organizationId" value="#{_organization.id}" />
                                                        </h:link>

                                                        <h:link outcome="/pages/management/balancedscorecard/list.xhtml"
                                                                title="#{messages['module.balancedScorecard']}"
                                                                styleClass="icon-tag">
                                                            <f:param name="organizationId" value="#{_organization.id}" />
                                                        </h:link>
                                                        
                                                        <h:link outcome="/pages/management/organization/viewTreeThemes.xhtml"
                                                                title="#{messages['module.theme']}"
                                                                styleClass="icon-th-large">
                                                            <f:param name="organizationId" value="#{_organization.id}" />
                                                        </h:link>

                                                        <h:link outcome="/pages/accounting/home.xhtml"
                                                                title="#{messages['module.accounting']}"
                                                                styleClass=" icon-barcode">
                                                            <f:param name="organizationId" value="#{_organization.id}" />
                                                        </h:link>
                                                        <h:link outcome="/pages/stocklist/warehouse/list.xhtml"
                                                                title="#{messages['module.stocklist']}"
                                                                styleClass=" icon-shopping-cart">
                                                            <f:param name="organizationId" value="#{_organization.id}" />
                                                        </h:link>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="span1 columns">
                                            </div>
                                        </div>

                                        <!--p>Your assignments: <ocp:tooltip placement="right" title="over #{projects.getAssignedStoryCount(userProfile, p)} stories" trigger="hover">
                                                <h:link id="assignments" value="#{projects.getAssignedTaskCount(userProfile, p)} tasks" 
                                                        outcome="/pages/project/view">
                                                    <f:param name="profile" value="#{p.owner.username}" />
                                                    <f:param name="project" value="#{p.slug}" />
                                                </h:link>
                                            </ocp:tooltip>
                                        </p-->

                                    </div>
                                </li>
                            </ui:repeat>

                            <h:panelGroup layout="block" rendered="${projects.count == 0}" styleClass="box">
                                Looks like you aren't working on anything right now. You can <h:link outcome="/pages/project/create" value="start a new project" /> to get going.
                            </h:panelGroup>
                        </ul>
                    </div>
                </div>
            </div>
            <p:growl/>
        </ui:define>

        <ui:define name="sidebar">
        </ui:define>

    </ui:composition>
</html>
