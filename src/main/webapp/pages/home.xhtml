<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/WEB-INF/view/templates/glue.xhtml">
        <ui:param name="title" value="Inicio" />

        <ui:define name="subnav">
        </ui:define>

        <!--<ui:define name="topnav-post-template">
           <h:panelGroup rendered="#{profile.persistent}">
                <li>
                    <div class="linkball">◗</div>
                    <h:link outcome="/pages/profile/profile"
                            style="padding-left: 15px;"
                            value="#{profile.username}">
                        <f:param name="profileId" value="#{profile.id}" />
                    </h:link>
                </li>
            </h:panelGroup>

            <ui:insert name="topnav-post-profile"/>
        </ui:define>-->

        <ui:define name="header-replace">
            <h:panelGroup layout="block" rendered="#{identity.loggedIn}">
                <div class="header-replace">
                    <div class="container">
                        <div class="row fl" style="margin-top: 5px;">                            
                            <c:choose>
                                <c:when test="#{account.isUserPaciente()}">
                                    <div class="span1 columns">
                                        <h:link outcome="/pages/paciente/view" title="Perfil de Paciente">
                                            <ocp:gravatar email="${userPaciente.email}" size="32" updatable="true" />
                                            <f:param name="pacienteId" value="#{account.loggedId}"/>
                                        </h:link>
                                    </div>
                                    <div class="span4 columns">                            
                                        <h4>
                                            <h:link outcome="/pages/paciente/view" title="Perfil de Paciente" value="${userPaciente.nombres} ${userPaciente.apellidos}">
                                                <f:param name="pacienteId" value="#{account.loggedId}"/>
                                            </h:link>
                                        </h4>
                                    </div>  
                                </c:when>
                                <c:when test="#{account.isUserProfile()}">                       
                                    <div class="span1 columns">
                                        <h:link outcome="/pages/profile/profile" title="#{userProfile.fullName}">
                                            <ocp:gravatar email="${userProfile.email}" size="32" updatable="true" />
                                            <f:param name="profileId" value="#{account.loggedId}"/>
                                        </h:link>
                                    </div> 
                                    <div class="span4 columns">                            
                                        <h4>
                                            <h:link outcome="/pages/profile/view" title="#{messages['common.viewprofile']}" value="${userProfile.fullName}">
                                                <f:param name="profileId" value="#{account.loggedId}"/>
                                            </h:link>
                                        </h4>
                                    </div>      
                                </c:when>
                            </c:choose>                               
                        </div>
                    </div>
                </div>
            </h:panelGroup>
        </ui:define>

        <ui:define name="content-pre">

        </ui:define>

        <ui:define name="content">
            <h:panelGroup  rendered="#{identity.loggedIn}">
                <h2>Bienvenidos al Softare Clínico de Gestión de Servicios de Salud </h2>
                <br/>
                <p:panel header="Módulo de Administración del Sistema" toggleable="true" rendered="#{account.tienePermiso('ADMIN')}">
                    <h:link value="#{messages['module.BussinesEntity']}" rendered="true" 
                            outcome="/pages/admin/bussinesentitytype/list">
                        <f:param name="result"></f:param>
                        <f:param name="typeName" value="edu.sgssalud.model.BussinesEntityType"></f:param>
                    </h:link>
                    <br />
                    <h:link value="#{messages['module.setting']}" rendered="#{true}" 
                            outcome="/pages/admin/setting/list">
                        <f:param name="result"></f:param>
                        <f:param name="typeName" value="edu.sgssalud.model.config.Setting"></f:param>
                    </h:link>
                    <br />
                    <h:link value="#{messages['servicioMedico.nombre']}" rendered="#{true}" 
                            outcome="/pages/admin/serviciosMedicos/lista" >
                        <f:param name="result"></f:param>                      
                    </h:link>
                    <br />               
                    <p:panel header="Administrar Perfiles de Usuario" toggleable="true" >
                        <h:link value="#{messages['module.profile.profiles']}" rendered="#{true}" 
                                outcome="/pages/admin/listProfile">
                            <f:param name="result"></f:param>
                            <f:param name="typeName" value="edu.sgssalud.model.profile.Profile"></f:param>
                        </h:link>
                        <br />
                        <h:link value="#{messages['security.group']}" rendered="#{true}" 
                                outcome="/pages/admin/security/list">
                            <f:param name="result"></f:param>                
                        </h:link>
                    </p:panel>
                </p:panel>

                <p:panel header="#{messages['modulo.admin.secretaria']}" toggleable="true" rendered="#{account.tienePermiso('SECRETARIA')}">
                    <h:link value="#{messages['paciente.admin']}" rendered="#{true}" 
                            outcome="/pages/secretaria/lista">                    
                    </h:link>
                    <br />                
                </p:panel>
                <p:panel header="#{messages['modulo.admin.Medicina']}" toggleable="true" toggleOrientation="vertical" rendered="#{account.tienePermiso('MEDICOS')}">
                    <h:link value="#{messages['historiasclinicas.admin']}" rendered="#{true}" 
                            outcome="/pages/depSalud/fichaMedica">                    
                    </h:link>
                    <br />  
                    <h:link value="#{messages['agendaMedica.admin']}" rendered="#{true}" 
                            outcome="/pages/depSalud/medicina/agenda">                    
                    </h:link>
                </p:panel>
                <p:panel header="#{messages['modulo.admin.Odontologia']}" toggleable="true" toggleOrientation="vertical" rendered="#{account.tienePermiso('ODONTOLOGOS')}">
                    <h:link value="#{messages['fichaOdontologica.admin']}" rendered="#{true}" 
                            outcome="/pages/depSalud/fichaMedica">                    
                    </h:link> 
                    <br />  
                    <h:link value="#{messages['agendaOdontologica.admin']}" rendered="#{true}" 
                            outcome="/pages/depSalud/odontologia/agenda">                    
                    </h:link>
                </p:panel>
                <p:panel header="#{messages['modulo.admin.enfermeria']}" toggleable="true" toggleOrientation="vertical" rendered="#{account.tienePermiso('ENFERMEROS')}">
                    <h:link value="#{messages['historiasclinicas.admin']}" rendered="#{true}" 
                            outcome="/pages/depSalud/fichaMedica">                    
                    </h:link> 
                    <br />  
                    <h:link value="#{messages['curaciones']}" rendered="#{true}" 
                            outcome="">                    
                    </h:link>
                    <br />  
                     <h:link value="#{messages['inyecciones']}" rendered="#{true}" 
                            outcome="">                    
                    </h:link>
                </p:panel>
                <p:panel header="#{messages['modulo.admin.LabClinico']}" toggleable="true" toggleOrientation="vertical" rendered="#{account.tienePermiso('LABORATORISTAS')}">
                    <h:link value="#{messages['pedidoLabClinico.admin']}" rendered="#{true}" 
                            outcome="/pages/labClinico/pedidoExamen">                    
                    </h:link>
                    <br />  
                    <h:link value="#{messages['examenesLabClinico.admin']}" rendered="#{true}" 
                            outcome="/pages/labClinico/examenes">                    
                    </h:link>                
                </p:panel>
                <p:panel header="#{messages['modulo.admin.farmacia']}" toggleable="true" toggleOrientation="vertical" rendered="#{account.tienePermiso('FARMACEUTICOS')}">
                    <h:link value="#{messages['medicamento.admin']}" rendered="#{true}" 
                            outcome="/pages/farmacia/medicamento/lista">                    
                    </h:link> 
                    <br />  
                    <h:link value="#{messages['recetas.admin']}" rendered="#{true}" 
                            outcome="/pages/farmacia/receta/recetas">                    
                    </h:link> 
                </p:panel>
            </h:panelGroup>
            <h:panelGroup  rendered="#{!identity.loggedIn}">
                <br/><br/>
                <div class="section">
                    <h1>Accesso Denegado</h1>
                </div>

                <div class="section">
                    <p>Usted no tiene autorización para realizar la acción solicitada.</p>

                    <p>#{facesContext.externalContext.requestMap['javax.servlet.error.message']}</p>
                </div>
            </h:panelGroup>
        </ui:define>
    </ui:composition>
</html>
