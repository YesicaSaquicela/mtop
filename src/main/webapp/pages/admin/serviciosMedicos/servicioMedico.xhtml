<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"      
      xmlns:f="http://java.sun.com/jsf/core"            
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:glue="http://eqaula.org/jsf/facelets"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition  template="/WEB-INF/view/templates/glue.xhtml">
        <f:metadata>
            <f:viewParam name="servicioId" value="#{serviciosMedicosHome.servicioId}" />             
        </f:metadata>

        <ui:define name="header-replace">
            <div class="header-replace">
                <div class="container-header" >
                    <div class="row lf row-title" >
                        <h3>#{serviciosMedicosHome.servicioId != null? messages['common.edit'] : messages['common.add']} 
                            #{'Servicio MÃ©dico '}#{serviciosMedicosHome.instance.nombre}</h3>   
                    </div>
                </div>
            </div>             
        </ui:define>
        <ui:define name="content">
            <h:form id="form" acceptcharset="UTF-8">
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> 
                <glue:input id="cate" name="categoria" type="text" label="#{messages['servicioMedico.categoria']}" value="#{serviciosMedicosHome.instance.categoria}" required="true" inlinehelp="#{messages['servicioMedico.categoria.lineaAyuda']}" execute="@this save zonas" render="cate" validator="">                    
                </glue:input>                
                <h:panelGroup layout="block" class="clearfix" rendered="true">
                    <label for="imagen1" >#{messages['servicioMedico.imagen']}  </label>
                    <div class="input">
                        <p:selectOneMenu id="imagen1" value="#{serviciosMedicosHome.instance.rutaImg}" effect="fade"  converter="#{omnifaces.SelectItemsConverter}" required="true"                                           
                                         var="img" rendered="true"  label="#{messages['servicioMedico.imagen']}" panelStyleClass="span5"  style="width: 200px;">
                            <f:selectItem  itemLabel = "#{messages['common.choice']}"  itemValue="" /> 
                            <f:selectItems value="#{serviciosMedicosHome.rutaImagenes}" var="rutaI" itemLabel="#{serviciosMedicosHome.nombreImg(rutaI)}" itemValue="#{rutaI}"/>                                                      
                            <p:ajax event="change" update="@parent :form:i save" partialSubmit="true" rendered=":form:i"/>                                                       
                        </p:selectOneMenu>                                                                        
                    </div>  
                </h:panelGroup>
                <div class="offset6" style="margin-top: -30px; padding-bottom: 20px;">
                    <p:graphicImage id="i" value="#{serviciosMedicosHome.instance.rutaImg}" width="40" height="40" rendered="true"/>
                </div> 
                <br/>
                <glue:input id="name" name="name" type="text" label="#{messages['common.name']}" value="#{serviciosMedicosHome.instance.nombre}" required="true" inlinehelp="#{messages['servicioMedico.nombre.lineaAyuda']}" execute="@this save" render="name" validator="" />                                
                <glue:input id="zonas" name="zonasDentales" type="checkbox" label="#{messages['servicioMedico.todasZonas']}" value="#{serviciosMedicosHome.instance.todasZonas}" inlinehelp="#{messages['servicioMedico.todasZonas.lineaAyuda']}" execute="@this save" render="zonas" rendered="#{serviciosMedicosHome.instance.categoria eq 'ODONTOLOGIA'}"/>                
                <h:panelGroup id="fnp" layout="block" class="clearfix">
                    <label for="fnacim">#{messages['fechaReceta.fechaEmision']} #{messages['comun.limite.vigencia']}</label>
                    <div class="input" >
                        <p:calendar  id="fnacim" value="#{serviciosMedicosHome.instance.fechaLimiteVigencia}" styleClass="xLarge" required="false" 
                                     rendered="true" pattern="dd-MMM-yyyy" navigator="true" showButtonPanel="true" >
                            <p:ajax event="dateSelect" rendered="fnp" update="@parent fnp" />  
                        </p:calendar>                             
                        <h:graphicImage value="#{resource['success.gif']}" rendered="#{serviciosMedicosHome.instance.fechaLimiteVigencia != null}"
                                        styleClass="validation-status" />
                        <span class="help-inline"><br/>#{messages['servicioMedico.fechaVigencia.lineaAyuda']}<ocp:message forId="fnacim" /></span>
                    </div>
                </h:panelGroup>


                <glue:input id="description" name="description" type="textarea" label="#{messages['common.description']}" value="#{serviciosMedicosHome.instance.descripcion}" inlinehelp="#{messages['servicioMedico.descripcion.lineaAyuda']}" execute="@this save" render="description"/>                                
                <div class="actions">

                    <p:commandButton id="save" action="#{serviciosMedicosHome.guardar()}" value="#{messages['common.save']}" styleClass="btn success" immediate="true"/>
                    &nbsp;&nbsp;
                    <h:link outcome="/pages/admin/serviciosMedicos/lista.xhtml" onclick="editDlg.hide();"
                            value="#{messages['common.cancel']}" styleClass="btn" >                         
                    </h:link>
                </div>
            </h:form>           
        </ui:define>             
    </ui:composition>
</html>

