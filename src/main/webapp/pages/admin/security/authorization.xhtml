<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"      
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:glue="http://eqaula.org/jsf/facelets"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition  template="/WEB-INF/view/templates/glue.xhtml">
        <f:metadata>
            <f:viewParam name="profileId" value="#{securityHome.profileId}" />                                    
        </f:metadata>

        <ui:define name="header-replace">            
            <div style="width: 100%; background-color: #FFF5E3; margin-bottom: 10px; ">
            <div class="container">
                <div class="row fl" style="margin-top: 5px;">
                    <div class="span7 columns">   
                        <div class="row fl" style="margin-top: 5px;">
                            <h3>#{not empty securityHome.profileId ? messages['common.authorize'] : ''}
                            #{messages['common.permissions']} #{messages['common.for']}
                            #{not empty securityHome.profile ? securityHome.profile.firstname : '' } #{securityHome.profile.surname}</h3>     
                            <p><span style=""><b>#{messages['common.username']} #{': '}</b>#{securityHome.profile.username}</span>
                                <br/>
                                <h:outputText escape="false" value="#{securityHome.profile.email}"/>                                
                            </p>
                        </div>                        
                    </div>
                    <div class="span4 columns offset3">
                        <h:form id="control">                                                         
                            <h:link value="#{messages['common.cancel']} #{'a'} #{messages['module.profile.profiles']} " rendered="#{true}" outcome="/pages/profile/list.xhtml?faces-redirect=true" styleClass="btn secondary">
                                
                            </h:link>                            
                        </h:form>
                    </div>
                </div>     
            </div>
        </div>
        </ui:define>
        <ui:define name="content">
            <h:form id="form" acceptcharset="UTF-8">

                <!-- Attributos para usuario 
                <p:panel id="panel-Attributes" header="#{messages['profile']}" toggleable="false" closable="false" toggleSpeed="0" closeSpeed="0" widgetVar="panel" >
                    <h:panelGroup id="attributes" layout="block" class="clearfix" >
                        <glue:input id="ustn" name="surname" type="text" label="#{messages['common.username']}" value="#{securityHome.profile.surname}" required="true" inlinehelp="#{messages['common.surname.inlinehelp']}" execute="@this save" disabled="true" />
                        <glue:input id="fstn" name="firstname" type="text" label="#{messages['common.firstname']}" value="#{securityHome.profile.firstname}" required="true" inlinehelp="#{messages['common.firstname.inlinehelp']}" execute="@this save" render="fstn" disabled="true"/>                
                        <glue:input id="email" name="email" type="text" label="#{messages['common.email']}" value="#{securityHome.profile.email}" required="false" validator="emailValidator" inlinehelp="#{messages['profile.dni.inlinehelp']}" execute="@this save" disabled="true"/>
                    </h:panelGroup>
                </p:panel>
                <br/>-->
                <p:panel id="panel-groups" header="#{messages['security.group']}" toggleable="false" closable="false" toggleSpeed="0" closeSpeed="0" widgetVar="panel">
                    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
                    <div class="admin-actions">                         
                        <h:commandButton id="save" action="#{securityHome.saveAssocition()}" value="#{messages['common.save']}" styleClass="btn primary" type="button"
                                         disabled="false"/>
                        #{' '}
                        <h:link value="#{messages['common.admin']} #{messages['security.group']}" rendered="#{true}" outcome="list" styleClass="btn" type="button">                            
                            <f:param name="backView" value="authorization"></f:param>
                        </h:link>                        
                    </div>
                    <p:dataTable var="group" value="#{securityGroupListService.resultList}"
                                 editable="false" id="groupTable" rendered="true"                          
                                 rows="10" > <!--
                                 rowKey="#{securityHome.selectedGroup.name}"                         
                                 selection="#{securityHome.selectedGroup}"                         
                                 selectionMode="single">

                        <p:ajax event="rowSelect" listener="#{securityHome.onRowSelect}"   
                                update=":form:button-edit :form:messages :form:save"/>                 
                        <p:ajax event="rowUnselect" listener="#{securityHome.onRowUnselect}" update=":form:button-edit :form:messages :form:save"/>

                        <p:column selectionMode="single"/>-->
                        <p:column headerText="#{messages['security.group.name']}" sortBy="#{group.name}">
                            <h:outputText value="#{group.name}" />
                        </p:column>
                        <p:column headerText="#{messages['security.group.type']}" sortBy="#{group.groupType}">
                            <h:outputText value="#{group.groupType}" />
                        </p:column>                
                    </p:dataTable>
                </p:panel>

            </h:form>                 
        </ui:define>             
    </ui:composition>
</html>

