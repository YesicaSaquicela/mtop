<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      template="/WEB-INF/view/templates/glue.xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"      
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:sgs="http://sgssalud.edu.org/jsf/facelets"
      xmlns:glue="http://eqaula.org/jsf/facelets">

    <ui:composition template="/WEB-INF/view/templates/glue.xhtml">
        <f:metadata>
            <f:viewParam name="fichaMedicaId" value="#{odontogramaHome.fichaMedicaId}" />
            <f:viewParam name="consultaOdontId" value="#{odontogramaHome.consultaOdontId}" />            
            <f:viewParam name="odontogramaId" value="#{odontogramaHome.odontogramaId}"/>
            <f:viewParam name="tipo" value="#{odontogramaHome.tipo}"/>            
        </f:metadata>
        <ui:define name="header-replace" >
            <div class="header-replace">
                <div class="container-header" >
                    <div class="row lf row-title" >
                        <h2>#{odontogramaHome.managed? messages['common.edit'] : messages['common.add']}#{' Odontograma'} 
                            #{odontogramaHome.nombreOdont}</h2> 
                    </div>
                </div>
            </div>
        </ui:define>
        <ui:define name="content" >
            <h:form id="form" >                
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panel id="odont" header="Odontograma" styleClass="span16" style="margin-top: -1.7%">
                    <ui:param name="_tab" value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                    <h:outputText style="margin: 0 0 0 34px;"
                                  value="18#{_tab}&nbsp;17#{_tab}16#{_tab}15#{_tab}14#{_tab}13#{_tab}&nbsp;12#{_tab}11"/>
                    <h:outputText style="margin: 0 0 0 4.8%;"
                                  value="&nbsp;&nbsp;21#{_tab}&nbsp;22#{_tab}23#{_tab}24#{_tab}&nbsp;25#{_tab}26#{_tab}27#{_tab}28"/><br/>   

                    <h:panelGroup id="odontC1" style="margin-left: 2%">
                        <sgs:denteS id="d18"  onclick="editDlg.show();" title="#{odontogramaHome.diente18.nombre} #{odontogramaHome.diente18.posicion}" 
                                    origen="#{odontogramaHome.diente18}" destino="#{odontogramaHome.selectDient}" 
                                    actualizar=":edit-dialog" render=":edit-dialog" >
                        </sgs:denteS>                           
                        <sgs:denteS id="d17"  onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente17.nombre} #{odontogramaHome.diente17.posicion}"
                                    origen="#{odontogramaHome.diente17}" destino="#{odontogramaHome.selectDient}" 
                                    actualizar=":edit-dialog" render=":edit-dialog" >
                        </sgs:denteS>
                        <sgs:denteS id="d16"  onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente16.nombre} #{odontogramaHome.diente16.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente16}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d15" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente15.nombre} #{odontogramaHome.diente15.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente15}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d14" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente14.nombre} #{odontogramaHome.diente14.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente14}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d13" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente13.nombre} #{odontogramaHome.diente13.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente13}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d12" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente12.nombre} #{odontogramaHome.diente12.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente12}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d11" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente11.nombre} #{odontogramaHome.diente11.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente11}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                    </h:panelGroup>                                
                    <p:spacer width="10" height=""/>
                    <h:panelGroup id="odontC2">
                        <sgs:denteS id="d21"  onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente21.nombre} #{odontogramaHome.diente21.posicion}"
                                    origen="#{odontogramaHome.diente21}" destino="#{odontogramaHome.selectDient}" 
                                    actualizar=":edit-dialog" render=":edit-dialog" >                            
                        </sgs:denteS>                           
                        <sgs:denteS id="d22"  onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente22.nombre} #{odontogramaHome.diente22.posicion}"
                                    origen="#{odontogramaHome.diente22}" destino="#{odontogramaHome.selectDient}" 
                                    actualizar=":edit-dialog" render=":edit-dialog" >
                        </sgs:denteS>
                        <sgs:denteS id="d23"  onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente23.nombre} #{odontogramaHome.diente23.posicion}"
                                    origen="#{odontogramaHome.diente22}" destino="#{odontogramaHome.selectDient}" 
                                    actualizar=":edit-dialog" render=":edit-dialog" >
                        </sgs:denteS>
                        <sgs:denteS id="d24" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente24.nombre} #{odontogramaHome.diente24.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente24}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d25" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente24.nombre} #{odontogramaHome.diente25.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente25}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d26" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente26.nombre} #{odontogramaHome.diente26.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente26}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d27" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente27.nombre} #{odontogramaHome.diente27.posicion}"> 
                            <f:setPropertyActionListener value="#{odontogramaHome.diente27}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                        <sgs:denteS id="d28" onclick="editDlg.show();" update="edit-dialog" title="#{odontogramaHome.diente28.nombre} #{odontogramaHome.diente28.posicion}">
                            <f:setPropertyActionListener value="#{odontogramaHome.diente28}" target="#{odontogramaHome.selectDient}"/>
                            <p:ajax process="@this" update=":edit-dialog" />
                        </sgs:denteS>
                    </h:panelGroup>
                </p:panel>         

                <p:panel id="tratam" header="Tratamientos" styleClass="span16">
                    <p:dataTable id="tablaTratamientos" value="#{odontogramaHome.listaTratamient}" var="tratam_" 
                                 paginator="true"
                                 rows="10" editable="true" selectionMode="single"
                                 selection="#{odontogramaHome.tratamiento}"  rowKey="#{tratam_.id}" >                        

                        <p:column headerText="Diente">
                            <h:outputText value="#{tratam_.diente.nombre}"/>&nbsp;&nbsp; 
                            <h:outputText value="#{tratam_.diente.posicion}"/>
                        </p:column>
                        <p:column headerText="Servicio Dental">
                            <h:outputText value="#{tratam_.servicioDisponible.nombre}" styleClass="span2"/>
                        </p:column>                        
                        <p:column headerText="Fecha realizada">
                            <h:outputText value="#{tratam_.fechaRelizacion}">
                                <f:convertDateTime pattern="dd-MM-yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Procedimiento">
                            <h:outputText value="#{tratam_.procedimiento}" styleClass="span3"/>
                        </p:column>                         
                    </p:dataTable>                
                </p:panel> 
                <div class="admin-actions span16" style="padding-right: 0%;">
                    <p:commandButton id="save" action="#{odontogramaHome.guardar()}" value="#{messages['common.save']}" 
                                     styleClass="btn success offset4"/>
                    &nbsp;&nbsp;
                    <h:link outcome="/pages/depSalud/odontologia/consultaOdontologica"
                            value="#{messages['common.cancel']}" styleClass="btn success" >
                        <f:param name="fichaMedicaId" value="#{odontogramaHome.fichaMedicaId}"></f:param>
                        <f:param name="consultaOdontId" value="#{odontogramaHome.consultaOdontId}"></f:param>
                    </h:link>
                </div>
            </h:form>
            <p:dialog id="edit-dialog" appendToBody="true" header="#{messages['common.add']} #{messages['tratamiento.nombre']} " 
                      widgetVar="editDlg" modal="true" resizable="true" dynamic="true" width="600">
                <h:form id="form-dialog">
                    <!--<h3> #{messages['common.for']} </h3>-->
                    <h:outputText value="#{messages['common.new']} #{messages['tratamiento.nombre']} a diente seleccionado #{odontogramaHome.selectDient.nombre} #{odontogramaHome.selectDient.posicion}" styleClass="offset2"/>

                    <div class="container-fluid">   
                        <div class="row-fluid">
                            <div class="span3">
                                <br/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.carie']}" styleClass="btn" >
                                    <p:graphicImage value="/resources/tratamientoDentales/carie.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/caries.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.carie']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="true" target="#{odontogramaHome.panel2}"/>
                                    <p:ajax process="@this" update=":form-dialog:panel2" rendered=":form-dialog:panel2"/>
                                </p:commandLink>    
                                <p:spacer  width="3" height="15"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.obturacionProvicional']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/obturacionProvicional.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/obturacion_provicional.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.obturacionProvicional']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel2}"/>
                                    <p:ajax process="@this" update="panel2" rendered="panel2"/>
                                </p:commandLink>
                                <p:spacer  width="3" height="9"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.obturacionDefinitiva']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/obturacionDefinitiva.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/obturacion_definitava.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.obturacionDefinitiva']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel2}"/>
                                    <p:ajax process="@this" update="panel2" rendered="panel2"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.sellanateNecesario']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/sellanteNecesarioS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/sellante_necesario.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.sellanateNecesario']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="true" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form-dialog:panel1" rendered=":form-dialog:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.sellanateRealizado']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/sellanteRealizadoS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/sellante_realizado.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.sellanateRealizado']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="true" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form-dialog:panel1" rendered=":form-dialog:panel1"/>
                                </p:commandLink>
                              
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.corona']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/coronaS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/corona.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.corona']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update="panel1" rendered="panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.endodonciaNecesaria']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/endodonciaNecesariaS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/endodoncia_necesaria.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.endodonciaNecesaria']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update="panel1" rendered="panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.endodonciaRealizada']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/endodonciaRealizaS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/endodoncia_realizada.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.endodonciaRealizada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update="panel1" rendered="panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.extraccionIndicada']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/extraccionIndicadaS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/extraccion_indicada.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.extraccionIndicada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update="panel1" rendered="panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.ausenciaPiezaDental']}" styleClass="btn">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/ausenciaPiezaDentalS.gif" width="35" height="40" />
                                    <f:setPropertyActionListener value="/resources/odontograma/ausencia_pieza_dental.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.extraccionIndicada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form-dialog:panel2" rendered=":form-dialog:panel2" partialSubmit="true"/>
                                </p:commandLink>
                            </div>
                            <div class="span7" >        
                                <br/>
                                <p:panel id="panel1" rendered="true" header="#{odontogramaHome.nombreTratamiento}" visible="#{odontogramaHome.panel1}">
                                    <f:facet name="" />
                                    <!--Tratamientos que se realizan a todo el diente rendered="#{odontogramaHome.panel1}"-->
                                    <p:graphicImage value="#{odontogramaHome.ruta}" width="35" height="40"/>
                                </p:panel>                                                        
                                <p:panel id="panel2" rendered="true" header="#{odontogramaHome.nombreTratamiento}" visible="true">                                  

                                    <!--Tratamientos que se realizan a partes del diente-->
                                    <p:graphicImage value="#{odontogramaHome.ruta}" width="35" height="40"/>
                                    <br/>
                                    <p:selectBooleanCheckbox value="#{odontogramaHome.tratamiento.c1}" label="Cuadrante Superior"/>  
                                    <br/>
                                    <p:selectBooleanCheckbox value="#{odontogramaHome.tratamiento.c4}" label="Cuadrante Izquierdo" />  
                                    <p:selectBooleanCheckbox value="#{odontogramaHome.tratamiento.c5}" label="Cuadrante Centro" />                                      
                                    <p:selectBooleanCheckbox value="#{odontogramaHome.tratamiento.c2}" label="Cuadrante Derecho" />  
                                    <br/>
                                    <p:selectBooleanCheckbox value="#{odontogramaHome.tratamiento.c3}" label="Cuadrante Inferior" />  
                                </p:panel>
                                <br/> 
                                <h:panelGroup class="clearfix" layout="block" style="margin-left: -40px">
                                    <label for="procedimient">#{messages['tratamiento.procedimiento']}</label>
                                    <div class="input">
                                        <h:inputTextarea id="procedimient" value="#{odontogramaHome.tratamiento.procedimiento}"  style="width: 90%; height: 80px;" required="true" label="#{messages['tratamiento.procedimiento']}"  >
                                            <f:ajax execute="@this" render="save1"  />
                                        </h:inputTextarea>
                                    </div>
                                </h:panelGroup>                                
                            </div>
                        </div>                            
                    </div>
                     
                    <div class="admin-actions">
                        <p:commandButton id="save1" value="#{messages['common.save']}" rendered="true"
                                         action="#{odontogramaHome.guardarTratamiento()}" immediate="true"
                                         ajax="true" styleClass="btn primary offset2" 
                                         style="margin-top:10px;" icon="ui-icon-disk">
                            <p:ajax process="@this" rendered=":form:odot" update="@parent :edit-dialog :form:odont :form:tablaTratamientos"/>
                        </p:commandButton>
                        #{' '}                     
                        <p:commandButton type="button" value="#{messages['common.cancel']}" style="margin-top:10px;" 
                                         rendered="true" onclick="editDlg.hide();"                                      
                                         styleClass="btn"/>  
                    </div> 
                </h:form>
            </p:dialog> 
        </ui:define>
    </ui:composition>
</html>                

