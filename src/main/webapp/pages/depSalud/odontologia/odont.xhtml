<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      template="/WEB-INF/view/templates/glue.xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"      
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:sgs="http://sgssalud.edu.org/jsf/facelets"
      xmlns:glue="http://eqaula.org/jsf/facelets">

    <ui:composition template="/WEB-INF/view/templates/glue.xhtml">
        <f:metadata>
            <f:viewParam name="fichaMedicaId" value="#{odontogramaHome.fichaMedicaId}" />
            <f:viewParam name="consultaOdontId" value="#{odontogramaHome.consultaOdontId}" />            
            <f:viewParam name="odontogramaId" value="#{odontogramaHome.odontogramaId}"/>
            <f:viewParam name="tipo" value="#{odontogramaHome.tipo}"/>            
        </f:metadata>
        <ui:define name="header-replace" >
            <div class="header-replace">
                <div class="container-header" >
                    <div class="row lf row-title" >
                        <h2>#{odontogramaHome.managed? messages['common.edit'] : messages['common.add']}#{' Odontograma'} 
                            #{odontogramaHome.nombreOdont}</h2> 
                    </div>
                </div>
            </div>
        </ui:define>
        <ui:define name="content-pre">
            <h:form id="form_pre" rendered="#{not odontogramaHome.instance.persistent}">
                <h3>#{odontogramaHome.managed? messages['common.edit'] : messages['common.add']}#{' Odontograma'} 
                    #{odontogramaHome.nombreOdont}</h3> 
                <div class="admin-actions" style="padding-right: 0%;">
                    <p:commandButton id="saveNew" action="#{odontogramaHome.guardar()}" value="#{messages['common.add']}" 
                                     styleClass="btn success offset4" >
                        <p:ajax process="@this" update=":form" rendered=":form" />
                    </p:commandButton>

                    &nbsp;&nbsp;
                    <h:link outcome="/pages/depSalud/odontologia/consultaOdontologica"
                            value="#{messages['common.cancel']}" styleClass="btn success" >
                        <f:param name="fichaMedicaId" value="#{odontogramaHome.fichaMedicaId}"></f:param>
                        <f:param name="consultaOdontId" value="#{odontogramaHome.consultaOdontId}"></f:param>
                    </h:link>
                </div>
            </h:form>                
        </ui:define>
        <ui:define name="content" >
            <h:form id="form" rendered="#{odontogramaHome.instance.persistent}">                
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panel id="odont" header="Odontograma" styleClass="span17" style="margin-top: -1.7%">
                    <ui:param name="_tab" value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                    <h:outputText style="margin: 0 0 0 34px;"
                                  value="18#{_tab}&nbsp;17#{_tab}16#{_tab}15#{_tab}14#{_tab}13#{_tab}&nbsp;12#{_tab}11"/>
                    <h:outputText style="margin: 0 0 0 4.8%;"
                                  value="&nbsp;&nbsp;21#{_tab}&nbsp;22#{_tab}23#{_tab}24#{_tab}&nbsp;25#{_tab}26#{_tab}27#{_tab}28"/><br/>   

                    <h:panelGroup id="odontC1" style="margin-left: 0.5%">
                        <sgs:denteS id="d18"  title="#{odontogramaHome.diente18.nombre} #{odontogramaHome.diente18.posicion} #{odontogramaHome.diente18.id}" 
                                    check="#{odontogramaHome.diente18.select}" diente="#{odontogramaHome.diente18}"                                     
                                    update="@form" actualizar=":form:opciones" render=":form:opciones" tratamientos="#{odontogramaHome.extraerDiente(odontogramaHome.diente18.posicion)}" >                            
                                    
                        </sgs:denteS>
                        <ui:param name="diente" value="#{odontogramaHome.extraerDiente(odontogramaHome.diente18.posicion)}"/>
                        <ui:repeat value="#{diente.tratamientos}" var="t">
                            <c:choose>                                    
                                <h:outputText value="hola 1"/>
                                <c:when test="#{t.nombre eq messages['tratamiento.carie']}">
                                    <h:outputText value="hola"/>
                                    <c:forEach items="#{t.cuandrantes}" var="c">                
                                        <c:choose>
                                            <c:when test="#{c == 'c1'}" > 
                                                <p:graphicImage value="/resources/tratamientoDentales/superior/carieSc1.gif" width="55" height="65" style="margin: 0 0 0 -55px;" 
                                                                rendered="true" />
                                            </c:when>
                                            <c:when test="#{c == 'c2'}" >                            
                                                <p:graphicImage value="/resources/tratamientoDentales/superior/carieSc2.gif" width="55" height="65" style="margin: 0 0 0 -55px;" 
                                                                rendered="true"/>
                                            </c:when>
                                            <c:when test="#{c == 'c3'}" >                                
                                                <p:graphicImage value="/resources/tratamientoDentales/superior/carieSc3.gif" width="55" height="65" style="margin: 0 0 0 -55px;"
                                                                rendered="true"/>
                                            </c:when>
                                            <c:when test="#{c == 'c4'}" >                              
                                                <p:graphicImage value="/resources/tratamientoDentales/superior/carieSc4.gif" width="55" height="65" style="margin: 0 0 0 -55px;"
                                                                rendered="true"/>
                                            </c:when>
                                            <c:when test="#{c == 'c5'}" >                              
                                                <p:graphicImage value="/resources/tratamientoDentales/superior/carieSc5.gif" width="55" height="65" style="margin: 0 0 0 -55px;"
                                                                rendered="true"/>
                                            </c:when>
                                            <c:otherwise>
                                            </c:otherwise>
                                        </c:choose>
                                    </c:forEach>                                     
                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.obturacionProvicional']}">
                                    <c:forEach items="#{t.cuandrantes}" var="c">
                                        <c:choose>
                                            <c:when test="#{c == 'c1'}" > 

                                            </c:when>
                                            <c:when test="#{c == 'c2'}" >                            

                                            </c:when>
                                            <c:when test="#{c == 'c3'}" > 

                                            </c:when>
                                            <c:when test="#{c == 'c4'}" > 

                                            </c:when>
                                            <c:when test="#{c == 'c5'}" > 

                                            </c:when>
                                            <c:otherwise>
                                            </c:otherwise>
                                        </c:choose>
                                    </c:forEach>
                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.obturacionDefinitiva']}">
                                    <c:forEach items="#{t.cuandrantes}" var="c">
                                        <c:choose>
                                            <c:when test="#{c == 'c1'}" >                           

                                            </c:when>
                                            <c:when test="#{c == 'c2'}" >

                                            </c:when>
                                            <c:when test="#{c == 'c3'}" >                             

                                            </c:when>
                                            <c:when test="#{c == 'c4'}" > 

                                            </c:when>
                                            <c:when test="#{c == 'c5'}" >                             

                                            </c:when>
                                            <c:otherwise>
                                            </c:otherwise>
                                        </c:choose>
                                    </c:forEach>
                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.corona']}">                    

                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.sellanateNecesario']}">                    

                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.sellanateRealizado']}">                    

                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.endodonciaNecesaria']}">                    

                                </c:when>
                                <c:when test="#{t.nombre == messages['tratamiento.endodonciaRealizada']}">                    

                                </c:when>
                                <c:when test="#{t.nambre == messages['tratamiento.extraccionIndicada']}">                    

                                </c:when>
                                <c:when test="#{t.nambre == messages['tratamiento.ausenciaPiezaDental']}">                    

                                </c:when>
                                <c:otherwise>
                                </c:otherwise>
                            </c:choose>        
                        </ui:repeat>
                        <sgs:denteS id="d17" title="#{odontogramaHome.diente17.nombre} #{odontogramaHome.diente17.posicion}"
                                    check="#{odontogramaHome.diente17.select}" diente="#{odontogramaHome.diente18}"
                                    tratamientos="#{odontogramaHome.extraerDiente(odontogramaHome.diente17.posicion).tratamientos}"
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                            
                        </sgs:denteS>   
                        <sgs:denteS id="d16"  title="#{odontogramaHome.diente16.nombre} #{odontogramaHome.diente16.posicion}"
                                    check="#{odontogramaHome.diente16.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente16}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                            
                        </sgs:denteS>
                        <sgs:denteS id="d15" title="#{odontogramaHome.diente15.nombre} #{odontogramaHome.diente15.posicion}"
                                    check="#{odontogramaHome.diente15.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente15}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                              
                        </sgs:denteS>
                        <sgs:denteS id="d14" title="#{odontogramaHome.diente14.nombre} #{odontogramaHome.diente14.posicion}"
                                    check="#{odontogramaHome.diente14.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente14}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                                                       
                        </sgs:denteS>
                        <sgs:denteS id="d13" title="#{odontogramaHome.diente13.nombre} #{odontogramaHome.diente13.posicion}"
                                    check="#{odontogramaHome.diente13.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente13}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">  
                        </sgs:denteS>
                        <sgs:denteS id="d12" title="#{odontogramaHome.diente12.nombre} #{odontogramaHome.diente12.posicion}"
                                    check="#{odontogramaHome.diente12.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente12}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">
                        </sgs:denteS>
                        <sgs:denteS id="d11" title="#{odontogramaHome.diente11.nombre} #{odontogramaHome.diente11.posicion}" diente="#{odontogramaHome.diente11}" tratamientos="#{odontogramaHome.diente11.tratamientos}"
                                    check="#{odontogramaHome.diente11.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente11}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">
                        </sgs:denteS>
                    </h:panelGroup>                                
                    <p:spacer width="10" height=""/>
                    <h:panelGroup id="odontC2">
                        <sgs:denteS id="d21" title="#{odontogramaHome.diente21.nombre} #{odontogramaHome.diente21.posicion}"
                                    check="#{odontogramaHome.diente21.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente21}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                            
                        </sgs:denteS>                           
                        <sgs:denteS id="d22" title="#{odontogramaHome.diente22.nombre} #{odontogramaHome.diente22.posicion}"
                                    check="#{odontogramaHome.diente22.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente22}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones"> 
                        </sgs:denteS>
                        <sgs:denteS id="d23" title="#{odontogramaHome.diente23.nombre} #{odontogramaHome.diente23.posicion}"
                                    check="#{odontogramaHome.diente23.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente23}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones"> 
                        </sgs:denteS>

                        <sgs:denteS id="d24" title="#{odontogramaHome.diente24.nombre} #{odontogramaHome.diente24.posicion}"
                                    check="#{odontogramaHome.diente24.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente24}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                             
                        </sgs:denteS>
                        <sgs:denteS id="d25" title="#{odontogramaHome.diente25.nombre} #{odontogramaHome.diente25.posicion}"
                                    check="#{odontogramaHome.diente25.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente25}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones"> 
                        </sgs:denteS>
                        <sgs:denteS id="d26" title="#{odontogramaHome.diente26.nombre} #{odontogramaHome.diente26.posicion}"
                                    check="#{odontogramaHome.diente26.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente26}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones"> 
                        </sgs:denteS>
                        <sgs:denteS id="d27" title="#{odontogramaHome.diente27.nombre} #{odontogramaHome.diente27.posicion}"
                                    check="#{odontogramaHome.diente27.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente27}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones"> 
                        </sgs:denteS>
                        <sgs:denteS id="d28" title="#{odontogramaHome.diente28.nombre} #{odontogramaHome.diente28.posicion}"
                                    check="#{odontogramaHome.diente28.select}" actionListener="#{odontogramaHome.actualizar()}"
                                    origen="#{odontogramaHome.diente28}" destino="#{odontogramaHome.selectDient}" 
                                    update="@form" actualizar=":form:opciones" render=":form:opciones">                             
                        </sgs:denteS>
                    </h:panelGroup>                    
                </p:panel>         
                <p:panel id="opciones" header="Opciones" styleClass="span16">
                    <div class="container-fluid">   
                        <div class="row-fluid">
                            <div class="span4">
                                <br/>                                
                                <p:commandLink title="#{messages['tratamiento.carie']}" action="#{odontogramaHome.mostrarPanel(2)}"
                                               styleClass="btn" ajax="true" update="@form" >
                                    <p:graphicImage value="/resources/tratamientoDentales/carie.gif" width="25" height="30" />
                                    <f:setPropertyActionListener value="/resources/odontograma/caries.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.carie']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel2}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel2" rendered=":form:opciones:panel2"/>                                    
                                </p:commandLink>   
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink title="#{messages['tratamiento.obturacionProvicional']}" action="#{odontogramaHome.mostrarPanel(2)}"
                                               styleClass="btn" ajax="true" update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/obturacionProvicional.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/obturacion_provicional.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.obturacionProvicional']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel2" rendered=":form:opciones:panel2"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.obturacionDefinitiva']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(2)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/obturacionDefinitiva.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/obturacion_definitiva.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.obturacionDefinitiva']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel2" rendered=":form:opciones:panel2"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.sellanateNecesario']}" action="#{odontogramaHome.mostrarPanel(1)}"
                                               styleClass="btn" update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/sellanteNecesarioS.gif" width="25" height="30" />
                                    <f:setPropertyActionListener value="/resources/odontograma/sellante_necesario.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.sellanateNecesario']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="true" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>                                  
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.sellanateRealizado']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/sellanteRealizadoS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/sellante_realizado.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.sellanateRealizado']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="true" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.corona']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/coronaS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/corona.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.corona']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.endodonciaNecesaria']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/endodonciaNecesariaS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/endodoncia_necesaria.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.endodonciaNecesaria']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.endodonciaRealizada']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/endodonciaRealizadaS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/endodoncia_realizada.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.endodonciaRealizada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.extraccionIndicada']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/extraccionIndicadaS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/extraccion_indicada.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.extraccionIndicada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                                <p:spacer  width="4" height="5"/>
                                <p:commandLink ajax="true" title="#{messages['tratamiento.ausenciaPiezaDental']}" styleClass="btn" action="#{odontogramaHome.mostrarPanel(1)}"
                                               update="@form">
                                    <p:graphicImage value="/resources/tratamientoDentales/superior/ausenciaPiezaDentalS.gif" width="25" height="30"  />
                                    <f:setPropertyActionListener value="/resources/odontograma/ausencia_pieza_dental.png" target="#{odontogramaHome.ruta}"/>
                                    <f:setPropertyActionListener value="#{messages['tratamiento.extraccionIndicada']}" target="#{odontogramaHome.nombreTratamiento}"/>
                                    <f:setPropertyActionListener value="#{true}" target="#{odontogramaHome.panel1}"/>
                                    <p:ajax process="@this" update=":form:opciones:panel1" rendered=":form:opciones:panel1"/>
                                </p:commandLink>
                            </div>
                            <div class="span10" >        
                                <p:panelGrid columns="2">                                    

                                    <p:panel id="panel1" rendered="#{odontogramaHome.panel1}" header="#{odontogramaHome.nombreTratamiento}" >                                 

                                        <p:graphicImage value="#{odontogramaHome.ruta}" width="35" height="40"/>
                                        <br/> 
                                    </p:panel>                                                        
                                    <p:panel id="panel2" rendered="#{odontogramaHome.panel2}" header="#{odontogramaHome.nombreTratamiento}" style="width: 240px;">                                  

                                        <!--Tratamientos que se realizan a partes del diente-->
                                        <p:graphicImage value="#{odontogramaHome.ruta}" width="35" height="40" title="Vista previa"/>                                    
                                        <br/>
                                        <h:panelGroup >
                                            <h:outputText value="Seleccione las partes del diente"/>
                                            <div >    
                                                <p:graphicImage value="/resources/odontograma/diente.png" width="100" height="95"/>
                                                <div class="diente_c" style="margin: -90px 0 0 40px">
                                                    <p:selectBooleanCheckbox value="#{odontogramaHome.c1}" label="Cuadrante Superior" style="margin: 0 0 0 0;float: top">
                                                        <f:ajax execute="@this" render="saveTratamiento"  />
                                                    </p:selectBooleanCheckbox> 
                                                </div>
                                                <div style="margin: 6px 0 0 8px">
                                                    <p:selectBooleanCheckbox value="#{odontogramaHome.c4}" label="Cuadrante Izquierdo" >
                                                        <f:ajax execute="@this" render="saveTratamiento"  />
                                                    </p:selectBooleanCheckbox>                                                        
                                                    <p:selectBooleanCheckbox value="#{odontogramaHome.c5}" label="Cuadrante Centro" style="margin-left: 14px;">
                                                        <f:ajax execute="@this" render="saveTratamiento"  />
                                                    </p:selectBooleanCheckbox>
                                                    <p:selectBooleanCheckbox value="#{odontogramaHome.c2}" label="Cuadrante Derecho" style="margin-left: 16px;">
                                                        <f:ajax execute="@this" render="saveTratamiento"  />
                                                    </p:selectBooleanCheckbox>  
                                                </div>
                                                <div style="margin: 9px 0 0 35px">
                                                    <p:selectBooleanCheckbox value="#{odontogramaHome.c3}" label="Cuadrante Inferior" style="margin-left: 5px;">
                                                        <f:ajax execute="@this" render="saveTratamiento"  />
                                                    </p:selectBooleanCheckbox>  
                                                </div>
                                            </div>
                                        </h:panelGroup>                                    
                                    </p:panel>   

                                    <h:panelGroup class="span6" layout="block" rendered="#{odontogramaHome.panel1 or odontogramaHome.panel2 or odontogramaHome.panel3}">
                                        <label for="procedimient" style="margin-left: -35px;">#{messages['tratamiento.procedimiento']}:</label>
                                        <br/>
                                        <br/>
                                        <div >
                                            <h:inputTextarea id="procedimient" value="#{odontogramaHome.procedimiento}"  style="width: 90%; height: 80px;" required="false" label="#{messages['tratamiento.procedimiento']}"  >
                                                <f:ajax execute="@this" render="saveTratamiento" event="keyup" />
                                                <!--<p:ajax event="keyup" process="@this"  update="saveTratamiento"  />-->
                                            </h:inputTextarea>
                                        </div>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </div>
                        </div>                            
                    </div>
                    <div class="admin-actions">
                        <p:commandButton id="saveTratamiento" value="#{messages['common.add']} #{messages['tratamiento.nombre']}" rendered="true"
                                         action="#{odontogramaHome.guardarTratamiento()}"  
                                         styleClass="btn primary offset2" ajax="true" immediate="true"
                                         style="margin-top:10px;" icon="ui-icon-disk">
                            <p:ajax process="@this" update=":form:opciones " rendered=":form:odont "/>
                            <!--immediate="true" -->
                        </p:commandButton>                        
                    </div> 
                </p:panel>            
                <p:panel id="tratam" header="Tratamientos" styleClass="span16">
                    <p:dataTable id="tablaTratamientos" value="#{odontogramaHome.listaTratamient}" var="tratam_" 
                                 paginator="true"
                                 rows="10" editable="true" selectionMode="single"
                                 selection="#{odontogramaHome.tratamiento}"  rowKey="#{tratam_.id}" >                        

                        <p:column headerText="Diente">
                            <h:outputText value="#{tratam_.diente.nombre}"/>&nbsp;&nbsp; 
                            <h:outputText value="#{tratam_.diente.posicion}"/>
                        </p:column>
                        <p:column headerText="Nombre">
                            <h:outputText value="#{tratam_.nombre}" styleClass="span2"/>
                        </p:column>                        
                        <p:column headerText="Fecha realizada">
                            <h:outputText value="#{tratam_.fechaRealizacion}">
                                <f:convertDateTime pattern="dd-MM-yyyy"/>
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Procedimiento">
                            <h:outputText value="#{tratam_.procedimiento}" styleClass="span3"/>
                        </p:column>                         
                        <p:column headerText="Opciones">                            
                            <p:commandLink id="button-delete" type="button" title="#{messages['common.delete']}"
                                           onclick="#{'deletedDlg.show()'}"  immediate="true" styleClass="btn success" 
                                           style="width: 10px; height: 10px;">                                                        
                                <p:graphicImage value="/resources/images/delete.gif" width="12" height="12"/>
                                <f:setPropertyActionListener value="#{tratam_}" target="#{odontogramaHome.tratamiento}"/>
                                <p:ajax process="@this" update=":cancel-dialog" />
                            </p:commandLink>
                        </p:column>  
                    </p:dataTable>   
                </p:panel> 
                <div class="admin-actions span16" style="padding-right: 0%;">
                    <p:commandButton id="save" action="#{odontogramaHome.guardar()}" value="#{messages['common.save']}" 
                                     styleClass="btn success offset4"/>
                    &nbsp;&nbsp;
                    <h:link outcome="/pages/depSalud/odontologia/consultaOdontologica"
                            value="#{messages['common.cancel']}" styleClass="btn success" >
                        <f:param name="fichaMedicaId" value="#{odontogramaHome.fichaMedicaId}"></f:param>
                        <f:param name="consultaOdontId" value="#{odontogramaHome.consultaOdontId}"></f:param>
                    </h:link>
                </div>
            </h:form>
            <!--
            <p:dialog id="edit-dialog" appendToBody="true" header="#{messages['common.add']} #{messages['tratamiento.nombre']} " 
                      widgetVar="editDlg" modal="true" resizable="true" dynamic="true" width="600">
                <h:form id="form-dialog">                    
                    <h:outputText value="#{messages['common.new']} #{messages['tratamiento.nombre']} a diente seleccionado #{odontogramaHome.selectDient.nombre} #{odontogramaHome.selectDient.posicion}" styleClass="offset2"/>

                </h:form>
            </p:dialog> -->
            <p:dialog id="cancel-dialog" header="#{messages['common.delete.confirm']}" widgetVar="deletedDlg" resizable="false" modal="true">  
                <h:form id="form-dialog-confirm-delete">
                    <h:panelGroup layout="block" style="padding:5px;">  
                        <h:outputText value="#{messages['common.delete.confirm.message']}"/>  
                    </h:panelGroup>  
                    <p:commandButton value="#{messages['common.yes']}" oncomplete="deletedDlg.hide();"                                           
                                     action="#{odontogramaHome.borrarTratamiento()}" update=":form"                                         
                                     ajax="true" process="@this"  
                                     style="margin-top:10px;">  
                    </p:commandButton>  
                    <p:commandButton value="#{messages['common.no']}" type="button" onclick="deletedDlg.hide();"  
                                     style="margin-top:10px;"/>  
                </h:form>
            </p:dialog>
        </ui:define>
    </ui:composition>
</html>                

