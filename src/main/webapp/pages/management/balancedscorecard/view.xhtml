<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:composition template="/WEB-INF/view/templates/glue.xhtml">
        <f:metadata>
            <f:viewParam name="balancedScorecardId" value="#{balancedScorecardHome.balancedScorecardId}" />
        </f:metadata>
        <ui:param name="title" value="#{balancedScorecardHome.instance.name}" />
        <ui:define name="header-replace">
            <div style="width: 100%; background-color: #FFF5E3; margin-bottom: 10px; ">
                <div class="container">
                    <div class="row fluid" style="margin-top: 5px;">
                        <div class="span9 ">
                            <h2>#{balancedScorecardHome.managed ? balancedScorecardHome.instance.name : ""}</h2>
                            <p><span style="">#{messages['common.description']}:#{balancedScorecardHome.instance.description}</span>                                

                            </p>
                        </div>

                        <div class="span3 ">
                            <h:form id="control">                                
                                <br/>
                                <h:link outcome="/pages/management/balancedscorecard/list" styleClass="link" value="#{messages['common.cancel']}">
                                    <f:param  name="organizationId" value="#{balancedScorecardHome.instance.organization.id}"></f:param>
                                </h:link>
                                
                                <br/>
                                <h:link value="#{messages['panel.admin']} " rendered="#{true}" 
                                        outcome="/pages/home.xhtml?faces-redirect=true" styleClass="link">                                
                                </h:link>
                            </h:form>
                        </div>

                    </div>
                </div></div>             
        </ui:define>

        <ui:define name="content">
            <h:form id="view">                
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> 
                <p:contextMenu for="bscTree" >  
                    <p:menuitem value="#{messages['common.add']}" update=":messages" actionListener="#{balancedScorecardHome.redirecToAdd}" icon="ui-icon-plus" /> 
                    <p:menuitem value="#{messages['common.edit']}" update=":messages" actionListener="#{balancedScorecardHome.redirecToEdit}" icon="ui-icon-plus" /> 
                </p:contextMenu>  
                <p:panel id="explorer-panel" header="#{messages['common.overview']}" toggleable="true">
                    <p:tree id="bscTree" value="#{balancedScorecardHome.bscNode}" var="node" orientation="horizontal" 
                            selectionMode="single" selection="#{balancedScorecardHome.selectedNode}"  dynamic="true">  

                        <p:ajax event="select" update=":messages :view:detail-panel " listener="#{balancedScorecardHome.onNodeSelect}" /> 
                        <p:treeNode expandedIcon="ui-icon-folder-open"  
                                    collapsedIcon="ui-icon-folder-collapsed">  
                        </p:treeNode>  
                        <p:treeNode  type="bsc" icon="ui-icon-home">    
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>  
                        <p:treeNode  type="perspective" icon="ui-icon-screenshot">    
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>  
                        <p:treeNode  type="theme" icon="icon-asterisk">    
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>  
                        <p:treeNode type="objetive" icon="ui-icon-document">  
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>
                        <p:treeNode type="measure" icon="ui-icon-flag">  
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>
                        <p:treeNode type="targets" icon="icon-tasks">  
                            <h:outputText value="#{node}" />  
                        </p:treeNode>
                        <p:treeNode type="periods" icon="icon-tasks">  
                            <h:outputText value="#{node}" />  
                        </p:treeNode>
                        <p:treeNode type="initiatives" icon="icon-tasks">  
                            <h:outputText value="#{node}" />  
                        </p:treeNode>
                        <p:treeNode type="methods" icon="icon-tasks">  
                            <h:outputText value="#{node}" />  
                        </p:treeNode>
                        <p:treeNode type="target" icon="icon-hand-right">  
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>
                        <p:treeNode type="period" icon="icon-hand-right">  
                            <h:outputText value="#{node.duration}" />  
                        </p:treeNode>
                        <p:treeNode type="initiative" icon="icon-hand-right">  
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>
                        <p:treeNode type="method" icon="icon-hand-right">  
                            <h:outputText value="#{node.name}" />  
                        </p:treeNode>
                    </p:tree>
                </p:panel>
                <p:panel id="detail-panel" header="#{balancedScorecardHome.selectedNode.data.name}" toggleable="true">

                    <p:treeTable id="treetable" value="#{balancedScorecardHome.selectedNode}" var="node"  propagateSelectionUp="true">  
                        <p:column style="width:150px">  

                            <h:outputText value="#{node}"/>                               
                        </p:column>  

                        <p:column style="width:150px">  

                            <h:outputText value="#{node.class.name.equals('org.eqaula.glue.model.management.Measure.class')}"/>  

                        </p:column>

                    </p:treeTable>  
                    #{node.data.class}
                </p:panel>

            </h:form>
        </ui:define>
    </ui:composition>
</html>
