<!--

  This file is part of SocialPM: Agile Project Management Tools (SocialPM) 
 
  Copyright (c)2010 Lincoln Baxter, III <lincoln@ocpsoft.com> (OcpSoft)
  
  If you are developing and distributing open source applications under 
  the GPL Licence, then you are free to use SocialPM under the GPL 
  License:
 
  SocialPM is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
 
  SocialPM is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
 
  You should have received a copy of the GNU General Public License
  along with SocialPM.  If not, see <http://www.gnu.org/licenses/>.
   
  For OEMs, ISVs, and VARs who distribute SocialPM with their products, 
  or host SocialPM online, OcpSoft provides flexible OEM commercial 
  Licences:
  
  To purchase a License, contact OcpSoft (http://ocpsoft.com)

-->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface shortDescription="Renders a gravatar for a given email address">
	<composite:attribute name="size" default="80" />
	<composite:attribute name="email" />
	<composite:attribute name="style" />
	<composite:attribute name="styleClass" />
	<composite:attribute name="updatable" default="false"/>
</composite:interface>

<composite:implementation>
	<h:panelGroup style="#{cc.attrs.style}">
		<h:outputLink value="https://www.gmail.com" 
			title="Change your avatar at gravatar.com &#160;&#187;&#160;" 
			target="_blank"
			style="margin: 0px; padding: 0px; #{cc.attrs.style}; background-color: #ddd;"
			styleClass="${cc.attrs.styleClass}"
			rendered="#{cc.attrs.updatable and cc.attrs.email != null}">
			<h:graphicImage value="#{gravatars.getURLFor(cc.attrs.email, cc.attrs.size)}" 
				style="padding: 2px;
				height: #{cc.attrs.size}px; 
				width: #{cc.attrs.size}px;
				background-color: #eee;" />
		</h:outputLink>
		
		<h:graphicImage value="#{gravatars.getURLFor(cc.attrs.email, cc.attrs.size)}" 
				height="#{cc.attrs.size}" 
				width="#{cc.attrs.size}" 
				style="padding: 2px; 
				background-color: #eee;
				${cc.attrs.style}" 
				styleClass="${cc.attrs.styleClass}"
				rendered="#{!cc.attrs.updatable and cc.attrs.email != null}"/>
	</h:panelGroup>
</composite:implementation>

</html>