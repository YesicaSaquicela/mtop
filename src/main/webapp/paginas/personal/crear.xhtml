<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/WEB-INF/templates/diseno1.xhtml">
        <f:metadata>
            <f:viewParam name="personaId" value="#{controladorPersona.id}"/>
        </f:metadata>
        <ui:define name="left">


        </ui:define>
        <ui:define name="content">
            <h:form id="form">

                <h1>Gestionar Personal</h1>
                <p:panel header="Datos Personales">
                    <h:panelGrid columns="3" >

                        <h:outputText value="Nombres"/>
                        <p:inputText id="nombre" value="#{controladorPersona.persona.nombre}"/>
                        <h:message for="nombre" errorClass="invalid" />
                        <h:outputText value="Apellidos"/>
                        <p:inputText id="apellido" value="#{controladorPersona.persona.apellido}"/>
                        <h:message for="apellido" errorClass="invalid" />
                        <h:outputText value="Numero de Identificacion"/>
                        <pe:inputNumber id="cedula" value="#{controladorPersona.persona.cedula}" maxlength="10" /> 
                        <h:message for="cedula" errorClass="invalid" />
                        <h:outputText value="Edad"/>
                        <pe:inputNumber id="edad" value="#{controladorPersona.persona.edad}"/> 
                        <h:message for="edad" errorClass="invalid" />
                        <h:outputText value="Tipo"/>
                        <p:selectOneMenu value="#{controladorPersona.persona.tipo}" effect="fade" >  
                            <f:selectItem itemLabel="Selecione uno" itemValue="" />  
                            <f:selectItem itemLabel="Administrador" itemValue="administrador" />  
                            <f:selectItem itemLabel="Secretaria" itemValue="secretaria" />  
                            <f:selectItem itemLabel="Conductor" itemValue="conductor" /> 
                            <f:selectItem itemLabel="Mecanico" itemValue="mecanico" />  
                        </p:selectOneMenu> 
                    </h:panelGrid>
                </p:panel>
                <!-- hacer un ciclo
                <ui:param name="t" value="#{controladorPersona.persona.listaValorAtributo.size()}"/>
                <h:outputLabel value="#{t}"/>-->
                <p:panel header="Direcciones">
                    <ui:repeat value="#{controladorPersona.persona.listaValorAtributo}" var="atributo">
                        <h:panelGrid columns="2">

                            <h:outputLabel  value="#{atributo.propiedad.etiquetaVista}:"/>
                            <h:panelGroup>
                                <p:inputText  value="#{atributo.valor}" required="#{atributo.propiedad.requerido}" 
                                              rendered="#{'java.lang.String' eq atributo.tipo }">

                                </p:inputText>
                                <p:calendar  value="#{atributo.valor}" required="#{atributo.propiedad.requerido}" 
                                             rendered="#{'java.util.Date' eq atributo.tipo}">

                                    <p:ajax event="dateSelect" />
                                </p:calendar>
                                <p:selectBooleanCheckbox  value="#{atributo.valor}" required="#{atributo.propiedad.requerido}" 
                                                          rendered="#{'java.lang.Boolean' eq atributo.tipo }">

                                </p:selectBooleanCheckbox>

                                <p:selectOneMenu  value="#{atributo.valor}" required="#{atributo.propiedad.requerido}" 
                                                  rendered="#{'java.lang.String[]' eq atributo.tipo } " editable="true" effect="fade">
                                    <f:selectItem itemLabel="Seleccione uno" itemValue=""/>
                                    <f:selectItems itemLabel="#{atributo.propiedad.listaValores}" />
                                </p:selectOneMenu>
                                <pe:inputNumber  value="#{atributo.valor}" required="#{atributo.propiedad.requerido}" 
                                                 rendered="#{'java.lang.Integer' eq atributo.tipo }"></pe:inputNumber>
                                <!-- pendiente primefaces extenciones -->
                                <p:selectBooleanCheckbox value="#{atributo.propiedad.habilitarEstado}" rendered="#{atributo.propiedad.habilitarEstado}" disabled="#{atributo.propiedad.habilitarEstado}"/>
                            </h:panelGroup>
                        </h:panelGrid>
                    </ui:repeat>

                </p:panel>



                <p:commandButton value="Guardar" action="#{controladorPersona.guardarPersona()}" 
                                 update=":form"/>


            </h:form>
        </ui:define>

    </ui:composition>
</html>

