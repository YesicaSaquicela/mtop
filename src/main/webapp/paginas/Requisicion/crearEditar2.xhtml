<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition template="/WEB-INF/templates/diseno1.xhtml">
        <f:metadata>

            <f:viewParam name="requisicionId" value="#{controladorRequisicion.id}"/>
            <f:viewParam name="titulo" value="#{controladorRequisicion.titulo}"/>
        </f:metadata>
        <ui:define name="left">


        </ui:define>
        <ui:define name="content">
            <h:form id="form">

                <h1>Crear/Editar Requisicion para Reparacion de Veh√≠culos
                    <h:outputText value="#{controladorRequisicion.titulo}"/>
                </h1>

                <p:panelGrid columns="3"  >

                    <f:facet name="header">  
                        <h:outputText value="Datos Generales"/>
                    </f:facet>  

                    <h:outputText value="Numero de Requisicion"/>
                    <p:inputText id="numReferencia" value="#{controladorRequisicion.requisicion.numRequisicion}"/>
                    <h:message for="numReferencia" errorClass="invalid" />
                    <h:outputText value="Fecha Requisicion"/>
                    <p:inputText id="fecha" value="#{controladorRequisicion.requisicion.fechaCreacion}"/> 
                    <h:message for="fecha" errorClass="invalid" />
                    <h:outputText value="Partida"/>
                    <p:selectOneMenu id="partida"  value="#{controladorRequisicion.requisicion.partida}" effect="fade" >  
                        <f:selectItem itemLabel="Selecione uno" itemValue="" />  
                        <f:selectItem itemLabel="1010100101" itemValue="1010100101" />  
                        <f:selectItem itemLabel="2020200202" itemValue="2020200202" />  
                        <f:selectItem itemLabel="3030300303" itemValue="3030300303" /> 
                        <f:selectItem itemLabel="4040404004" itemValue="4040404004" />  
                    </p:selectOneMenu> 
                    <h:message for="partida" errorClass="invalid" />
                    <h:outputText value="Tipo de adquisicion"/>
                    <p:selectOneMenu id="adquisicion" value="#{controladorRequisicion.requisicion.tipoAdquisicion}" effect="fade" >  
                        <f:selectItem itemLabel="Selecione uno" itemValue="" />  
                        <f:selectItem itemLabel="Bodega" itemValue="bodega" />  
                        <f:selectItem itemLabel="Compra" itemValue="compra" />  
                        <f:selectItem itemLabel="Pago" itemValue="pago" /> 
                        <f:selectItem itemLabel="Credito" itemValue="credito" />  
                    </p:selectOneMenu> 
                    <h:message for="adquisicion" errorClass="invalid" />

                    <h:outputText value="Observacion"/>
                    <p:inputTextarea id="observacion" value="#{controladorRequisicion.requisicion.observaciones}" autoResize="false"/>
                    <h:message for="observacion" errorClass="invalid" />


                    <h:outputText value="Personal que solicita: " />  
                    <p:selectOneMenu value="#{controladorRequisicion.requisicion.psolicita}" effect="fade" 
                                     converter="personaConverter">  
                        <f:selectItem itemLabel="Selecione uno" itemValue="" />  
                        <f:selectItems id="mecanic" value="#{listaPersonas.persona}" var="persona" itemLabel="#{persona.nombre}" itemValue="#{persona}"/>  
                    </p:selectOneMenu> 
                    <h:message for="persona" errorClass="invalid" />

                 
                    <p:inputTextarea id="numero" value="#{controladorRequisicion.c}" autoResize="false"/>
                    <h:message for="numero" errorClass="invalid" />
                    <h:outputText value="Items" />

                    <p:dataTable id="listap" value="#{controladorRequisicion.listaitem}" var="item">
                        <p:column headerText="Cantidad">
                            <h:outputText value="#{item.cantidad}"></h:outputText>
                        </p:column>
                        <p:column headerText="Unidad Medida">
                            <h:outputText value="#{item.unidadMedida}"></h:outputText>
                        </p:column>
                        <p:column headerText="Descripcion">
                            <h:outputText value="#{item.descripcion}"></h:outputText>
                        </p:column>

                        <p:column headerText="Acciones" style="width: 5%"> 
                            <h:commandLink action="#{controladorRequisicion.editarItem(item)}" value="Editar"/>
                            
                        </p:column>
                    </p:dataTable>
                    <h:commandLink action="#{controladorRequisicion.crearItem()}" value="CRear"/>
                    
                    <p:commandButton value="Crear" action="#{controladorRequisicion.crearItem()}" 
                                 update=":form"/>
                </p:panelGrid>

                <p:commandButton value="Guardar" action="#{controladorRequisicion.guardar()}" 
                                 update=":form"/>


            </h:form>
        </ui:define>

    </ui:composition>
</html>

