<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"      
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:s="http://jboss.org/seam/faces"
      xmlns:p="http://primefaces.org/ui"
      xmlns:mtop="http://mtop.org/jsf/facelets"             
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:ocp="http://java.sun.com/jsf/composite/ocpcommon">
    <ui:composition template="/WEB-INF/templates/plantilla.xhtml">
        <f:metadata>                                 
            <f:viewParam name="propertyId" value="#{propertyHome.propertyId}" />
            <s:viewAction action="#{propertyHome.load}" if="#{conversation.transient}"/>
            <f:viewParam name="bussinesEntityTypeId" value="#{propertyHome.bussinesEntityTypeId}" />             
            <f:viewParam name="structureId" value="#{propertyHome.structureId}" />                    
            <f:viewParam name="nombreGrupo" value="#{propertyHome.instance.groupName}" />                    
        </f:metadata> 
        <ui:define name="header">
            #{propertyHome.propertyId != null? messages['common.edit'] : messages['common.add']} 
            #{messages['common.properties']} 

        </ui:define>
        <ui:define name="content">    
            <h:form id="form" acceptcharset="UTF-8">
                <div role="main">
                    <div class="container-content" style="margin: 1em 5em 6em 5em; " align="left">
                           <div class="actions" align="right">
                                 <h:link id="cancel" value="#{messages['common.cancel']}" rendered="true" outcome="/paginas/admin/bussinesentitytype/bussinesentitytype.xhtml?faces-redirect=true" styleClass="btn  btn-success" >                        
                                <f:param name="bussinesEntityTypeId" value ="#{propertyHome.bussinesEntityTypeId}"></f:param>                        
                            </h:link>           
                           
                           
                        </div><br/> 
                        <div class="panel panel-primary">
                            <div class="panel-heading"><center>Datos generales de la propiedad #{propertyHome.instance.name}</center></div>
                            <p:panel id="fnp">

                                <div class="container-fluid">
                                    <div class="row-fluid"  >
                                        <div class="col-md-6"> 
                                            <h:outputLabel value="otro valor"></h:outputLabel>

                                            <p:outputLabel  value="#{messages['common.property.groupName']}"/><br/>
                                            <p:inputText id="groupn" type="text" label="#{messages['common.property.groupName']}" 
                                                         value="#{propertyHome.instance.groupName}" disabled="true" required="false"  /><br/>
                                            <span class="help-inline text-muted">Nombre del Grupo</span><br/><br/>

                                            <mtop:input id="name" name="tname" type="text" label="#{messages['common.name']}" 
                                                        value="#{propertyHome.instance.name}" required="true" inlinehelp="#{messages['common.property.name.help']}" execute="@this save" render="name"/><br></br>                   

                                            <h:panelGroup id="typeP" layout="block" class="clearfix" >
                                                <label for="type" class="control-label" >#{messages['common.property.type']} *</label>
                                                <div class="input">
                                                    <p:selectOneMenu id="type" value="#{propertyHome.propertyType}" effect="fade"  converter="#{omnifaces.SelectItemsConverter}" required="true" requiredMessage="false" 
                                                                     label="#{messages['common.property.type']}" rendered="true">
                                                        <f:selectItem  itemLabel = "#{messages['common.choice']}" />  
                                                        <f:selectItems value="#{propertyHome.tiposDatos}" var="tipos" itemLabel="#{tipos}" itemValue="#{tipos}"/>
                                                        <p:ajax event="change" update="@parent pvaluep " partialSubmit="true"/>
                                                    </p:selectOneMenu><br></br> 
                                                    <h:graphicImage value="#{resource['success.gif']}" rendered="#{propertyHome.propertyType  != null}"
                                                                    styleClass="validation-status" />
                                                    <span class="help-inQline text-muted">#{messages['common.property.type.help']} <ocp:message forId="type" /></span>
                                                </div><br></br>
                                            </h:panelGroup>
                                            <h:panelGroup id="pvaluep" layout="block" class="clearfix">
                                                <label >#{messages['common.property.value']}</label>
                                                <div class="input" >
                                                    <p:inputText id="in1"  value="#{propertyHome.propertyStringValue}" styleClass="xLarge"
                                                                 required="true" label="#{messages['common.property.value']}"
                                                                 rendered="#{propertyHome.propertyType ne 'Fecha'
                                                                             and propertyHome.propertyType ne 'AreaTexto'
                                                                             and propertyHome.propertyType ne 'EnteroMayor'
                                                                             and propertyHome.propertyType ne 'Real'
                                                                             and propertyHome.propertyType ne 'Entero'
                                                     }"
                                                                 disabled="#{propertyHome.propertyType eq 'EstadoParteMecanica'}"/>  


                                                    <p:inputText id="in2" value="#{propertyHome.propertyNumberValue}" styleClass="xLarge"
                                                                 required="true" label="#{messages['common.property.value']}"
                                                                 rendered="#{propertyHome.propertyType eq 'Entero'}"

                                                                 > 
                                                        <f:ajax execute="@this" render="save"  />


                                                        <!--p:ajax event="keypress" process="value valueintval" rendered="save"/-->
                                                    </p:inputText>    
                                                    <p:messages id="msg2" showDetail="true" autoUpdate="true" closable="true"/>
                                                    <ocp:message forId="in2" />
                                                    <!--s:validateForm id="valueintval" validatorId="digitValidator"/-->
                                                    <p:calendar  value="#{propertyHome.propertyDateValue}" styleClass="xLarge" navigator="true" label="#{messages['common.property.value']}"
                                                                 rendered="#{propertyHome.propertyType eq 'Fecha'}" required="true">

                                                        <f:ajax event="dateSelect" execute="@this" render="save"/>
                                                    </p:calendar>
                                                    <p:inputTextarea value="#{propertyHome.propertyStringValue}" styleClass="form-control"
                                                                     required="true" label="#{messages['common.property.value']}" style="width: 400px; height: 100px;" 
                                                                     rendered="#{propertyHome.propertyType eq 'AreaTexto'}">
                                                        <f:ajax event="blur" execute="@this" render="save"/>
                                                    </p:inputTextarea>

                                                    <pe:inputNumber value="#{propertyHome.propertyStringValue}" styleClass="form-control"
                                                                    required="true" label="#{messages['common.property.value']}"
                                                                    rendered="#{propertyHome.propertyType eq 'EnteroMayor'  or propertyHome.propertyType eq 'Real'}"
                                                                    >  
                                                        <f:ajax event="blur" execute="@this" render="save"/>
                                                    </pe:inputNumber><br></br>
                                                    <h:graphicImage value="#{resource['success.gif']}" rendered="#{propertyHome.propertyStringValue != null}"
                                                                    styleClass="validation-status" />
                                                    <span class="help-inline text-muted">#{messages['common.property.value.help']}</span>

                                                </div>

                                                <h:panelGrid columns="1" rendered="#{propertyHome.propertyType eq 'EstadoParteMecanica'}" style="margin-bottom:10px" cellpadding="5"  >

                                                    <br></br>
                                                    <div class="input">
                                                        <p:outputLabel for="evaluacion" value="Porcentaje de Evaluación  " />#{" "}
                                                        <p:selectOneRadio id="evaluacion" value="#{propertyHome.instance.evaluacionParte}"   >
                                                            <f:selectItem itemLabel="Muy importante   " itemValue="100" /><br/>
                                                            <f:selectItem itemLabel="Importante" itemValue="80" />
                                                        </p:selectOneRadio>
                                                    </div>
                                                </h:panelGrid>

                                            </h:panelGroup><br></br>                   


                                            <mtop:input id="validator" name="validator" type="text" label="#{messages['common.property.validator']}" 
                                                        value="#{propertyHome.instance.validator}" required="false" inlinehelp="#{messages['common.property.validator.help']}" execute="@this save" /><br></br>
                                        </div>
                                        <div class="col-md-6"> 


                                            <mtop:input id="rqd" name="requerid" type="checkbox" label="#{messages['common.property.required']}" 
                                                        value="#{propertyHome.instance.required}" required="false" inlinehelp="#{messages['common.property.required.help']}" execute="@this save" /><br></br>                                   
                                            <mtop:input id="secuencia" name="sequence" type="java.lang.Long" label="#{messages['common.property.sequence']}" 
                                                        value="#{propertyHome.instance.sequence}" required="false" inlinehelp="#{messages['common.property.sequence.help']}" execute="@this save" /><br></br>
                                            <mtop:input id="label" name="label" type="text" label="#{messages['common.property.label']}" 
                                                        value="#{propertyHome.instance.label}" render="label" validador="stringValidator" required="true" inlinehelp="#{messages['common.property.label.help']}" execute="@this save" /><br></br>
                                            <!--mtop:input id="converter" name="converter" type="text" label="# {messages['common.property.converter']}" 
                                                        value="# {propertyHome.instance.converter}" required="false" inlinehelp="# {messages['common.property.converter.help']}" execute="@this save" /><br></br-->
                                            <mtop:input id="hpline" name="helpInline" type="textarea" label="#{messages['common.property.helpinline']}" 
                                                        value="#{propertyHome.instance.helpInline}" required="true" inlinehelp="Ingrese una descripción de la linea" execute="@this save" /><br></br>
                                        </div>

                                    </div>   </div>

                            </p:panel>
                        </div>




                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" 
                                       href="#collapseThree">
                                        Propiedades para grupos
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <p:panel>                     
                                        <mtop:input id="overwrite" name="overwrite" type="text" label="#{messages['common.property.overwrite']}" 
                                                    value="#{propertyHome.instance.overwrite}" required="false" inlinehelp="#{messages['common.property.overwrite.help']}" execute="@this save" /><br></br>
                                        <mtop:input id="shwclms" name="showInColumns" type="checkbox" label="#{messages['common.property.showInColumns']}" 
                                                    value="#{propertyHome.instance.showInColumns}" required="false" inlinehelp="#{messages['common.property.showInColumns.help']}" execute="@this save" /><br></br>
                                        <mtop:input id="sdbep" name="showDefaultBEP" type="checkbox" label="#{messages['common.property.showDefaultBussinesEntityProperties']}" 
                                                    value="#{propertyHome.instance.showDefaultBussinesEntityProperties}" required="false" inlinehelp="#{messages['common.property.showDefaultBussinesEntityProperties.help']}" execute="@this save" /><br></br>                     
                                        <mtop:input id="minmb" name="minimumMembers" type="java.lang.Long" label="#{messages['common.property.minimumMembers']}" 
                                                    value="#{propertyHome.instance.minimumMembers}" required="false" inlinehelp="#{messages['common.property.minimumMembers.help']}" execute="@this save" /><br></br>
                                        <mtop:input id="maxmb" name="maximumMembers" type="java.lang.Long" label="#{messages['common.property.maximumMembers']}" 
                                                    value="#{propertyHome.instance.maximumMembers}" required="false" inlinehelp="#{messages['common.property.maximumMembers.help']}" execute="@this save" /><br></br>
                                    </p:panel>
                                </div>
                            </div>
                        </div>

                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" 
                                       href="#collapseThree1">
                                        Propiedades opcionales
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseThree1" class="panel-collapse collapse">
                                <div class="panel-body">

                                    <p:panel>                                         
                                        <mtop:input id="render" name="render" type="text" label="#{messages['common.property.render']}" 
                                                    value="#{propertyHome.instance.render}" required="false" inlinehelp="#{messages['common.property.render.help']}" execute="@this save" /><br></br>
                                        <mtop:input id="customf" name="customForm" type="text" label="#{messages['common.property.customForm']}" 
                                                    value="#{propertyHome.instance.customForm}" required="false" inlinehelp="#{messages['common.property.customForm.help']}" execute="@this save" /><br></br> 
                                        <mtop:input id="gntrn" name="generatorName" type="text" label="#{messages['common.property.generatorName']}" 
                                                    value="#{propertyHome.instance.generatorName}" required="false" inlinehelp="#{messages['common.property.generatorName.help']}" execute="@this save" /><br></br> 
                                    </p:panel> 
                                </div>
                            </div>
                        </div>

                        <div class="actions" align="center">
                            <p:commandButton id="save" action="#{propertyHome.saveProperty()}" 
                                             value="#{messages['common.save']}" styleClass="btn  btn-success" icon="ui-icon-disk"/>
                      
                             <!--p:commandButton type="button" value="# {messages['common.delete']}" styleClass="btn  btn-success" onclick="# {propertyHome.hasValuesBussinesEntity()?  'deletedDlg.show()' : 'alertDlg.show()' }"  immediate="true"
                                             update=":cancel-dialog :alerts-dialog:" rendered="# {not empty propertyHome.instance.id}">                        
                            </p:commandButton-->
                        </div>    
                    </div></div>
                <p:ajaxStatus onstart="ajaxStatusDialog.show();" onsuccess="ajaxStatusDialog.hide();"/> 

                        <p:dialog modal="true" widgetVar="ajaxStatusDialog"  resizable="false"  draggable="false" closable="false" > 
                            <div class="input" align="center">
                            <h:outputText value="Por favor espere, Cargando..."/><br/>
                            </div>
                            <p:graphicImage value="/resources/ajax-loader.gif" /> 
                        </p:dialog>
          
            </h:form>
            <p:dialog id="cancel-dialog" header="#{messages['common.delete.confirm']}" widgetVar="deletedDlg" resizable="false" modal="true">  
                <h:form id="form-dialog-confirm-delete">
                    <h:panelGroup layout="block" style="padding:5px;">  
                        <h:outputText value="#{messages['common.delete.confirm.message']}"/>  
                    </h:panelGroup>  
                    <p:commandButton value="#{messages['common.yes']}" oncomplete="deletedDlg.hide();"                                           
                                     action="#{propertyHome.deleteProperty()}"                                          
                                     ajax="true" process="@this"  
                                     style="margin-top:10px;">  
                    </p:commandButton>  
                    <p:commandButton value="#{messages['common.no']}" type="button" onclick="deletedDlg.hide();"  
                                     style="margin-top:10px;"/>  
                </h:form>
            </p:dialog>
            <p:dialog id="alerts-dialog" header="#{messages['common.alert']}" widgetVar="alertDlg" resizable="false" modal="true">  
                <h:form id="form-alerts-dialog">
                    <h:panelGroup layout="block" style="padding:5px;">  
                        <h:outputText value="#{messages['common.property.hasValues']}"/>  
                    </h:panelGroup>                          
                    <p:commandButton value="#{messages['common.cancel']}" type="button" onclick="alertDlg.hide();"                                           
                                     styleClass="btn  btn-success"/>  
                </h:form>
            </p:dialog>
        </ui:define>
    </ui:composition>
</html>

